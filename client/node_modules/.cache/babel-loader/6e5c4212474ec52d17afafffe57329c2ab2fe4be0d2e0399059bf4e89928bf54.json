{"ast":null,"code":"var _jsxFileName = \"D:\\\\Ashish\\\\2_1\\\\2_1_Project\\\\Actual_Project\\\\newdemo\\\\Webcapture_part\\\\client\\\\src\\\\components\\\\ImageCaptureComponent.jsx\",\n  _s = $RefreshSig$();\n// src/components/ImageCaptureComponent.jsx\nimport React, { useRef, useEffect, useState } from 'react';\nimport html2canvas from 'html2canvas';\nimport { uploadImages } from '../services/api';\nimport { v4 as uuidv4 } from 'uuid'; // For generating unique session IDs\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImageCaptureComponent = () => {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [sessionId] = useState(uuidv4()); // Generate a unique session ID\n\n  useEffect(() => {\n    const startWebcam = async () => {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: true\n        });\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n          videoRef.current.onloadedmetadata = () => {\n            try {\n              videoRef.current.play();\n            } catch (err) {\n              console.error('Error playing video:', err);\n            }\n          };\n        }\n      } catch (err) {\n        console.error('Error accessing webcam:', err);\n      }\n    };\n    startWebcam();\n    const captureImages = async () => {\n      const canvas = await html2canvas(document.body);\n      canvas.toBlob(async blob => {\n        if (blob) {\n          const screenshotFile = new File([blob], 'screenshot.png', {\n            type: 'image/png'\n          });\n          const canvasElement = canvasRef.current;\n          const video = videoRef.current;\n          if (video && canvasElement) {\n            canvasElement.width = video.videoWidth;\n            canvasElement.height = video.videoHeight;\n            const ctx = canvasElement.getContext('2d');\n            ctx.drawImage(video, 0, 0, canvasElement.width, canvasElement.height);\n            canvasElement.toBlob(async webcamBlob => {\n              if (webcamBlob) {\n                const webcamFile = new File([webcamBlob], 'webcam.png', {\n                  type: 'image/png'\n                });\n                // Send the session ID with the images\n                await uploadImages(screenshotFile, webcamFile, sessionId);\n              }\n            }, 'image/png');\n          }\n        }\n      });\n    };\n    const intervalId = setInterval(captureImages, 3000);\n    return () => {\n      clearInterval(intervalId);\n      if (videoRef.current && videoRef.current.srcObject) {\n        const stream = videoRef.current.srcObject;\n        const tracks = stream.getTracks();\n        tracks.forEach(track => track.stop());\n      }\n    };\n  }, [sessionId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Image capture in progress... Session: \", sessionId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(ImageCaptureComponent, \"MJNj8SxyYYV+quP5xctZks3qNMg=\");\n_c = ImageCaptureComponent;\nexport default ImageCaptureComponent;\nvar _c;\n$RefreshReg$(_c, \"ImageCaptureComponent\");","map":{"version":3,"names":["React","useRef","useEffect","useState","html2canvas","uploadImages","v4","uuidv4","jsxDEV","_jsxDEV","ImageCaptureComponent","_s","videoRef","canvasRef","sessionId","startWebcam","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","onloadedmetadata","play","err","console","error","captureImages","canvas","document","body","toBlob","blob","screenshotFile","File","type","canvasElement","width","videoWidth","height","videoHeight","ctx","getContext","drawImage","webcamBlob","webcamFile","intervalId","setInterval","clearInterval","tracks","getTracks","forEach","track","stop","children","ref","style","display","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Ashish/2_1/2_1_Project/Actual_Project/newdemo/Webcapture_part/client/src/components/ImageCaptureComponent.jsx"],"sourcesContent":["// src/components/ImageCaptureComponent.jsx\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport html2canvas from 'html2canvas';\r\nimport { uploadImages } from '../services/api';\r\nimport { v4 as uuidv4 } from 'uuid'; // For generating unique session IDs\r\n\r\nconst ImageCaptureComponent = () => {\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const [sessionId] = useState(uuidv4()); // Generate a unique session ID\r\n\r\n  useEffect(() => {\r\n    const startWebcam = async () => {\r\n      try {\r\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n\r\n        if (videoRef.current) {\r\n          videoRef.current.srcObject = stream;\r\n          videoRef.current.onloadedmetadata = () => {\r\n            try {\r\n              videoRef.current.play();\r\n            } catch (err) {\r\n              console.error('Error playing video:', err);\r\n            }\r\n          };\r\n        }\r\n      } catch (err) {\r\n        console.error('Error accessing webcam:', err);\r\n      }\r\n    };\r\n\r\n    startWebcam();\r\n\r\n    const captureImages = async () => {\r\n      const canvas = await html2canvas(document.body);\r\n      canvas.toBlob(async (blob) => {\r\n        if (blob) {\r\n          const screenshotFile = new File([blob], 'screenshot.png', { type: 'image/png' });\r\n          const canvasElement = canvasRef.current;\r\n          const video = videoRef.current;\r\n\r\n          if (video && canvasElement) {\r\n            canvasElement.width = video.videoWidth;\r\n            canvasElement.height = video.videoHeight;\r\n            const ctx = canvasElement.getContext('2d');\r\n            ctx.drawImage(video, 0, 0, canvasElement.width, canvasElement.height);\r\n\r\n            canvasElement.toBlob(async (webcamBlob) => {\r\n              if (webcamBlob) {\r\n                const webcamFile = new File([webcamBlob], 'webcam.png', { type: 'image/png' });\r\n                // Send the session ID with the images\r\n                await uploadImages(screenshotFile, webcamFile, sessionId);\r\n              }\r\n            }, 'image/png');\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    const intervalId = setInterval(captureImages, 3000);\r\n\r\n    return () => {\r\n      clearInterval(intervalId);\r\n      if (videoRef.current && videoRef.current.srcObject) {\r\n        const stream = videoRef.current.srcObject;\r\n        const tracks = stream.getTracks();\r\n        tracks.forEach((track) => track.stop());\r\n      }\r\n    };\r\n  }, [sessionId]);\r\n\r\n  return (\r\n    <div>\r\n      <video ref={videoRef} style={{ display: 'none' }} />\r\n      <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n      <h2>Image capture in progress... Session: {sessionId}</h2>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageCaptureComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}